<div class="container">
  <form class="form-group" [formGroup]="add_item_form" (ngSubmit)="submitItem()">
    <app-card [title]="page_title">
      <div class="row">
        <div class="col-md-3">

          <!--Item -->
          <!-- Field -->
          <label for="item_name" class="form-label">Item Name</label>
          <select class="form-control form-control-lg opt-value" formControlName="item_config" *ngIf="!item_loading">
            <option *ngFor="let item of items" value="{{item.id}}" required>{{item.type_name}}</option>
          </select>
          <!-- Loader -->
          <span class="linear-background" *ngIf="item_loading"></span>
          <!-- Errors -->
          <div
            *ngIf="add_item_form.controls['item_config'].invalid && (add_item_form.controls['item_config'].dirty || add_item_form.controls['item_config'].touched)"
            class="alert">
            <div *ngIf="add_item_form.controls['item_config'].errors.required">
              <span class="text-danger opt-value">
                Field is required <br>
              </span>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <!-- Stock -->
          <!-- Field -->
          <label for="item_name" class="form-label">Warehouse / Stockroom</label>
          <select class="form-control form-control-lg opt-value" formControlName="store" *ngIf="!stock_loading">
            <option *ngFor="let store of stores" value="{{store.id}}" required>{{store.name}}</option>
          </select>

          <!-- Loader -->
          <span class="linear-background" *ngIf="stock_loading"></span>

          <!--Validation Errors -->
          <div
            *ngIf="add_item_form.controls['store'].invalid && (add_item_form.controls['store'].dirty || add_item_form.controls['store'].touched)"
            class="alert">
            <div *ngIf="add_item_form.controls['store'].errors.required">
              <span class="text-danger opt-value">
                Field is required <br>
              </span>
            </div>

          </div>
        </div>
        <div class="col-md-2">
          <!-- Purchase Order -->
          <!-- Field -->
          <label for="item_name" class="form-label">Purchase Order</label>
          <input class="form-control form-control-lg opt-value" formControlName="purchase_order" required />

          <!-- Validation Errors -->
          <div
            *ngIf="add_item_form.controls['store'].invalid && (add_item_form.controls['purchase_order'].dirty || add_item_form.controls['purchase_order'].touched)"
            class="alert">
            <div *ngIf="add_item_form.controls['purchase_order'].errors.required">
              <span class="text-danger opt-value">
                Field is required <br>
              </span>
            </div>
          </div>

        </div>
        <div class="col-md-2" *ngIf="check_box == false">
          <!-- Item Count Field -->
          <!-- Field -->
          <label for="item_name" class="form-label">Item Count</label>
          <input type="number" class="form-control form-control-lg" formControlName="item_count" />

          <div
            *ngIf="add_item_form.controls['item_count'].invalid && (add_item_form.controls['item_count'].dirty || add_item_form.controls['item_count'].touched)"
            class="alert">
            <div *ngIf="add_item_form.controls['item_count'].errors.required">
              <span class="text-danger opt-value">
                Field is required <br>
              </span>
            </div>
            <div *ngIf="add_item_form.controls['item_count'].errors.required">
              <span class="text-danger opt-value">
                Field has to be a number <br>
              </span>
            </div>
          </div>




        </div>
        <div class="col-md-2 text-center">
          <!-- Serialized Check Box -->


          <label for="serials" class="form-label">Serialized? </label>
          <div class="form-check">
            <input type="checkbox" class="form-check-input opt-value" [(ngModel)]="check_box"
              [ngModelOptions]="{standalone: true}" />
          </div>


        </div>
      </div>
      <div class="row">


      </div>
      <div class="row" *ngIf="check_box == true">

        <div class="col-md-12">
          <label for="serial_numbers" class="form-label">Serial</label>
          <textarea class="form-control form-control-lg opt-value" formControlName="serial_numbers">

          </textarea>
          <div
            *ngIf="(add_item_form.controls['serial_numbers'].dirty || add_item_form.controls['serial_numbers'].touched) && (check_box == true && add_item_form.value.serial_numbers == '')"
            class="alert">
            <div>
              <span class="text-danger opt-value">
                Field is required <br>
              </span>
            </div>
          </div>

        </div>


      </div>
    </app-card>
    <div class="spark-dynamic-forms__button-wrapper">
      <button type="button" class="btn btn btn-sm mb-3 lift spark-dynamic-forms__clear"
        (click)="clearForm()">Clear</button>
      <button *ngIf="newEntry == true" type="submit" class="btn btn-primary mb-3 lift spark-dynamic-forms__submit"
        [disabled]="!add_item_form.valid">
        <span class="spark-text">Add Item
          <!-- {{isLoading?'Loading...': formAction+' '+submitButtonText}} -->
        </span>
      </button>
      <button *ngIf="newEntry == false" type="submit" class="btn btn-primary mb-3 lift spark-dynamic-forms__submit"
        [disabled]="!add_item_form.valid">
        <span class="spark-text">Edit Item
          <!-- {{isLoading?'Loading...': formAction+' '+submitButtonText}} -->
        </span>
      </button>

    </div>
  </form>



</div>
