<div class="container">
    <div class="spark-dynamic-forms__bulk-wrapper">
        <!-- TODO -> call a module for the bulk upload processes -->
        <button type="button" data-toggle="modal" data-target="#bulkModal"
            class="btn btn btn-sm mb-3 lift spark-dynamic-forms__bulk-btn">
            Bulk Actions
        </button>
        <app-modals [title]="cardTitle+' Bulk Create'" [hasFooter]="false" [modalId]="'bulkModal'">
            <div class="bulk__wrapper">
                <div class="bulk__content">
                    Excel/ CSV are the only acceptable formats
                </div>
                <div class="bulk__button-wrapper">
                    <button class="btn btn btn-sm mb-3 spark-dynamic-forms__bulk-btn">
                        Download Template
                    </button>
                    <button class="btn btn btn-sm mb-3 spark-dynamic-forms__bulk-btn-upload" (click)="bulkOptions()">
                        Upload File
                    </button>
                </div>
            </div>
        </app-modals>
    </div>
    <form class="" [formGroup]="formGroup" (ngSubmit)="dataReceived()">
        <app-card *ngIf="!tabbed" [title]="formAction+' '+cardTitle">
            <span *ngFor="let error of detailErrors" class="text-danger">
                {{error}} <br>
            </span>
            <div>
                <div *ngFor="let item of formGroupOrder;let i=index;">
                    <div class="row">
                        <div *ngFor="let field of item;let j=index;" class="col-sm-{{12/item.length}}">
                            <app-myinput [formErrors]="formErrors" [data]="getDescriptionObject(field)"
                                [form]="formGroup" formControName="{{field}}">
                            </app-myinput>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </app-card>

        <app-card-dropdown *ngIf="tabbed" [tabbedItems]="tabbedItems" [tabbed]="tabbed">
            <span *ngFor="let error of detailErrors" class="text-danger">
                {{error}} <br>
            </span>
            <div>
                <div *ngFor="let item of formGroupOrder;let i=index;">
                    <div class="row">
                        <div *ngFor="let field of item;let j=index;" class="col-sm-{{12/item.length}}">
                            <app-myinput [formErrors]="formErrors" [data]="getDescriptionObject(field)"
                                [form]="formGroup" formControName="{{field}}">
                            </app-myinput>
                        </div>
                    </div>
                </div>

                <br>
            </div>
        </app-card-dropdown>

        <div class="spark-dynamic-forms__button-wrapper">
            <button *ngIf="isNew" type="button" (click)="resetForm()"
                class="btn btn btn-sm mb-3 lift spark-dynamic-forms__clear">Clear</button>
            <button [disabled]="!formGroup.valid" type="submit"
                class="btn btn-primary mb-3 lift spark-dynamic-forms__submit">
                <span class="spark-text has--loading" [ngClass]="{'has--loading': loading}">
                    {{isLoading?'Loading...': formAction+' '+submitButtonText}}
                </span>
            </button>
        </div>
    </form>
</div>